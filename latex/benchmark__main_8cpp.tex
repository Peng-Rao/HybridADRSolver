\doxysection{src/applications/benchmark/benchmark\+\_\+main.cpp File Reference}
\hypertarget{benchmark__main_8cpp}{}\label{benchmark__main_8cpp}\index{src/applications/benchmark/benchmark\_main.cpp@{src/applications/benchmark/benchmark\_main.cpp}}


Main benchmark driver for comparing hybrid vs fully distributed solvers.  


{\ttfamily \#include "{}core/problem\+\_\+definition.\+h"{}}\newline
{\ttfamily \#include "{}core/types.\+h"{}}\newline
{\ttfamily \#include "{}matrix\+\_\+based/matrix\+\_\+based\+\_\+solver.\+h"{}}\newline
{\ttfamily \#include "{}matrix\+\_\+free/matrix\+\_\+free\+\_\+solver.\+h"{}}\newline
{\ttfamily \#include "{}utils.\+h"{}}\newline
{\ttfamily \#include $<$deal.\+II/base/mpi.\+h$>$}\newline
{\ttfamily \#include $<$deal.\+II/base/multithread\+\_\+info.\+h$>$}\newline
{\ttfamily \#include $<$getopt.\+h$>$}\newline
{\ttfamily \#include $<$iostream$>$}\newline
{\ttfamily \#include $<$string$>$}\newline
Include dependency graph for benchmark\+\_\+main.\+cpp\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{benchmark__main_8cpp__incl}
\end{center}
\end{figure}
\doxysubsubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
{\footnotesize template$<$int dim$>$ }\\\mbox{\hyperlink{structBenchmarkUtils_1_1BenchmarkResult}{Benchmark\+Result}} \mbox{\hyperlink{benchmark__main_8cpp_a4401427454118e1585753a4f38406f0f}{run\+\_\+matrix\+\_\+based\+\_\+benchmark}} (const \mbox{\hyperlink{classHybridADRSolver_1_1ProblemInterface}{Problem\+Interface}}$<$ dim $>$ \&problem, int n\+\_\+refinements, int degree, MPI\+\_\+\+Comm comm, const std\+::string \&test\+\_\+type)
\begin{DoxyCompactList}\small\item\em Run a single benchmark for the matrix-\/based solver. \end{DoxyCompactList}\item 
{\footnotesize template$<$int dim, int fe\+\_\+degree$>$ }\\\mbox{\hyperlink{structBenchmarkUtils_1_1BenchmarkResult}{Benchmark\+Result}} \mbox{\hyperlink{benchmark__main_8cpp_a0d70884bbeb28347d25972aa39f03f6f}{run\+\_\+matrix\+\_\+free\+\_\+benchmark}} (const \mbox{\hyperlink{classHybridADRSolver_1_1ProblemInterface}{Problem\+Interface}}$<$ dim $>$ \&problem, int n\+\_\+refinements, MPI\+\_\+\+Comm comm, const std\+::string \&test\+\_\+type)
\begin{DoxyCompactList}\small\item\em Run a single benchmark for the matrix-\/free solver. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{benchmark__main_8cpp_a860fa55df0eb81f3d54d59c45e2f5eea}{run\+\_\+strong\+\_\+scaling\+\_\+benchmark}} (\mbox{\hyperlink{classBenchmarkUtils_1_1ResultCollector}{Result\+Collector}} \&collector, int n\+\_\+refinements, int degree, MPI\+\_\+\+Comm comm)
\begin{DoxyCompactList}\small\item\em Run strong scaling benchmark Fixed problem size, varying number of processes. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{benchmark__main_8cpp_a1c5f9ca6f62f136176edb006cef28657}{run\+\_\+weak\+\_\+scaling\+\_\+benchmark}} (\mbox{\hyperlink{classBenchmarkUtils_1_1ResultCollector}{Result\+Collector}} \&collector, int base\+\_\+refinements, int degree, MPI\+\_\+\+Comm comm)
\begin{DoxyCompactList}\small\item\em Run weak scaling benchmark Problem size scales with number of processes (constant work per process) \end{DoxyCompactList}\item 
void \mbox{\hyperlink{benchmark__main_8cpp_aabb0d793c97fd1a8a658a416d61ca495}{run\+\_\+memory\+\_\+benchmark}} (\mbox{\hyperlink{classBenchmarkUtils_1_1ResultCollector}{Result\+Collector}} \&collector, int min\+\_\+refs, int max\+\_\+refs, int degree, MPI\+\_\+\+Comm comm)
\begin{DoxyCompactList}\small\item\em Run memory efficiency benchmark at various problem sizes. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{benchmark__main_8cpp_ac7608332d002ef2745359f4cada4afc8}{print\+\_\+usage}} (const char \texorpdfstring{$\ast$}{*}program\+\_\+name)
\begin{DoxyCompactList}\small\item\em Print usage information. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{benchmark__main_8cpp_a0ddf1224851353fc92bfbff6f499fa97}{main}} (int argc, char \texorpdfstring{$\ast$}{*}argv\mbox{[}$\,$\mbox{]})
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Main benchmark driver for comparing hybrid vs fully distributed solvers. 

This benchmark compares\+:
\begin{DoxyEnumerate}
\item Matrix-\/based solver (MPI distributed with Work\+Stream threading for assembly)
\item Matrix-\/free solver (Hybrid MPI + threading throughout)
\end{DoxyEnumerate}

Tests performed\+:
\begin{DoxyItemize}
\item Strong scaling\+: Fixed problem size, varying number of processes/threads
\item Weak scaling\+: Problem size scales with number of processes
\item Memory efficiency comparison
\item Throughput analysis (Do\+Fs/second)
\end{DoxyItemize}

Usage\+: mpirun -\/np $<$\+N$>$ ./benchmark \mbox{[}options\mbox{]}

Options\+: --strong Run strong scaling test --weak Run weak scaling test --refinements Number of mesh refinements (default\+: 4) --degree Polynomial degree (default\+: 2) --output CSV file (default\+: benchmark\+\_\+results.\+csv) 

\label{doc-func-members}
\Hypertarget{benchmark__main_8cpp_doc-func-members}
\doxysubsection{Function Documentation}
\Hypertarget{benchmark__main_8cpp_a0ddf1224851353fc92bfbff6f499fa97}\index{benchmark\_main.cpp@{benchmark\_main.cpp}!main@{main}}
\index{main@{main}!benchmark\_main.cpp@{benchmark\_main.cpp}}
\doxysubsubsection{\texorpdfstring{main()}{main()}}
{\footnotesize\ttfamily \label{benchmark__main_8cpp_a0ddf1224851353fc92bfbff6f499fa97} 
int main (\begin{DoxyParamCaption}\item[{int}]{argc}{, }\item[{char \texorpdfstring{$\ast$}{*}}]{argv}{\mbox{[}$\,$\mbox{]}}\end{DoxyParamCaption})}

\Hypertarget{benchmark__main_8cpp_ac7608332d002ef2745359f4cada4afc8}\index{benchmark\_main.cpp@{benchmark\_main.cpp}!print\_usage@{print\_usage}}
\index{print\_usage@{print\_usage}!benchmark\_main.cpp@{benchmark\_main.cpp}}
\doxysubsubsection{\texorpdfstring{print\_usage()}{print\_usage()}}
{\footnotesize\ttfamily \label{benchmark__main_8cpp_ac7608332d002ef2745359f4cada4afc8} 
void print\+\_\+usage (\begin{DoxyParamCaption}\item[{const char \texorpdfstring{$\ast$}{*}}]{program\+\_\+name}{}\end{DoxyParamCaption})}



Print usage information. 

\Hypertarget{benchmark__main_8cpp_a4401427454118e1585753a4f38406f0f}\index{benchmark\_main.cpp@{benchmark\_main.cpp}!run\_matrix\_based\_benchmark@{run\_matrix\_based\_benchmark}}
\index{run\_matrix\_based\_benchmark@{run\_matrix\_based\_benchmark}!benchmark\_main.cpp@{benchmark\_main.cpp}}
\doxysubsubsection{\texorpdfstring{run\_matrix\_based\_benchmark()}{run\_matrix\_based\_benchmark()}}
{\footnotesize\ttfamily \label{benchmark__main_8cpp_a4401427454118e1585753a4f38406f0f} 
template$<$int dim$>$ \\
\mbox{\hyperlink{structBenchmarkUtils_1_1BenchmarkResult}{Benchmark\+Result}} run\+\_\+matrix\+\_\+based\+\_\+benchmark (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{classHybridADRSolver_1_1ProblemInterface}{Problem\+Interface}}$<$ dim $>$ \&}]{problem}{, }\item[{int}]{n\+\_\+refinements}{, }\item[{int}]{degree}{, }\item[{MPI\+\_\+\+Comm}]{comm}{, }\item[{const std\+::string \&}]{test\+\_\+type}{}\end{DoxyParamCaption})}



Run a single benchmark for the matrix-\/based solver. 

\Hypertarget{benchmark__main_8cpp_a0d70884bbeb28347d25972aa39f03f6f}\index{benchmark\_main.cpp@{benchmark\_main.cpp}!run\_matrix\_free\_benchmark@{run\_matrix\_free\_benchmark}}
\index{run\_matrix\_free\_benchmark@{run\_matrix\_free\_benchmark}!benchmark\_main.cpp@{benchmark\_main.cpp}}
\doxysubsubsection{\texorpdfstring{run\_matrix\_free\_benchmark()}{run\_matrix\_free\_benchmark()}}
{\footnotesize\ttfamily \label{benchmark__main_8cpp_a0d70884bbeb28347d25972aa39f03f6f} 
template$<$int dim, int fe\+\_\+degree$>$ \\
\mbox{\hyperlink{structBenchmarkUtils_1_1BenchmarkResult}{Benchmark\+Result}} run\+\_\+matrix\+\_\+free\+\_\+benchmark (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{classHybridADRSolver_1_1ProblemInterface}{Problem\+Interface}}$<$ dim $>$ \&}]{problem}{, }\item[{int}]{n\+\_\+refinements}{, }\item[{MPI\+\_\+\+Comm}]{comm}{, }\item[{const std\+::string \&}]{test\+\_\+type}{}\end{DoxyParamCaption})}



Run a single benchmark for the matrix-\/free solver. 

\Hypertarget{benchmark__main_8cpp_aabb0d793c97fd1a8a658a416d61ca495}\index{benchmark\_main.cpp@{benchmark\_main.cpp}!run\_memory\_benchmark@{run\_memory\_benchmark}}
\index{run\_memory\_benchmark@{run\_memory\_benchmark}!benchmark\_main.cpp@{benchmark\_main.cpp}}
\doxysubsubsection{\texorpdfstring{run\_memory\_benchmark()}{run\_memory\_benchmark()}}
{\footnotesize\ttfamily \label{benchmark__main_8cpp_aabb0d793c97fd1a8a658a416d61ca495} 
void run\+\_\+memory\+\_\+benchmark (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classBenchmarkUtils_1_1ResultCollector}{Result\+Collector}} \&}]{collector}{, }\item[{int}]{min\+\_\+refs}{, }\item[{int}]{max\+\_\+refs}{, }\item[{int}]{degree}{, }\item[{MPI\+\_\+\+Comm}]{comm}{}\end{DoxyParamCaption})}



Run memory efficiency benchmark at various problem sizes. 

\Hypertarget{benchmark__main_8cpp_a860fa55df0eb81f3d54d59c45e2f5eea}\index{benchmark\_main.cpp@{benchmark\_main.cpp}!run\_strong\_scaling\_benchmark@{run\_strong\_scaling\_benchmark}}
\index{run\_strong\_scaling\_benchmark@{run\_strong\_scaling\_benchmark}!benchmark\_main.cpp@{benchmark\_main.cpp}}
\doxysubsubsection{\texorpdfstring{run\_strong\_scaling\_benchmark()}{run\_strong\_scaling\_benchmark()}}
{\footnotesize\ttfamily \label{benchmark__main_8cpp_a860fa55df0eb81f3d54d59c45e2f5eea} 
void run\+\_\+strong\+\_\+scaling\+\_\+benchmark (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classBenchmarkUtils_1_1ResultCollector}{Result\+Collector}} \&}]{collector}{, }\item[{int}]{n\+\_\+refinements}{, }\item[{int}]{degree}{, }\item[{MPI\+\_\+\+Comm}]{comm}{}\end{DoxyParamCaption})}



Run strong scaling benchmark Fixed problem size, varying number of processes. 

\Hypertarget{benchmark__main_8cpp_a1c5f9ca6f62f136176edb006cef28657}\index{benchmark\_main.cpp@{benchmark\_main.cpp}!run\_weak\_scaling\_benchmark@{run\_weak\_scaling\_benchmark}}
\index{run\_weak\_scaling\_benchmark@{run\_weak\_scaling\_benchmark}!benchmark\_main.cpp@{benchmark\_main.cpp}}
\doxysubsubsection{\texorpdfstring{run\_weak\_scaling\_benchmark()}{run\_weak\_scaling\_benchmark()}}
{\footnotesize\ttfamily \label{benchmark__main_8cpp_a1c5f9ca6f62f136176edb006cef28657} 
void run\+\_\+weak\+\_\+scaling\+\_\+benchmark (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classBenchmarkUtils_1_1ResultCollector}{Result\+Collector}} \&}]{collector}{, }\item[{int}]{base\+\_\+refinements}{, }\item[{int}]{degree}{, }\item[{MPI\+\_\+\+Comm}]{comm}{}\end{DoxyParamCaption})}



Run weak scaling benchmark Problem size scales with number of processes (constant work per process) 

